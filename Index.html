<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ktabs Generator – Live Demo</title>
    <style>
        :root{--primary:#007bff;--secondary:#6c757d;--success:#28a745;--danger:#dc3545;--bg:#f8f9fa;--text:#333;--radius:8px;--shadow:0 2px 10px rgba(0,0,0,.1)}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;margin:0;padding:20px;background:var(--bg);color:var(--text);line-height:1.6}
        .container{max-width:1200px;margin:auto;display:grid;grid-template-columns:1fr 1fr;gap:40px}
        h1{grid-column:span 2;text-align:center;color:var(--primary)}
        .section{background:#fff;padding:30px;border-radius:var(--radius);box-shadow:var(--shadow)}
        .inputs{display:flex;flex-direction:column;gap:20px}
        label{font-weight:bold;margin-bottom:5px}
        input,textarea,select{padding:12px;border:1px solid #ddd;border-radius:var(--radius);font-size:16px}
        textarea{resize:vertical;min-height:100px}
        .upload-area{border:2px dashed #ddd;padding:40px;text-align:center;cursor:pointer;transition:.3s}
        .upload-area:hover,.upload-area.dragover{border-color:var(--primary);background:#f0f8ff}
        .preview{position:relative;height:300px;background:#eee;border-radius:var(--radius);overflow:hidden;display:flex;align-items:center;justify-content:center}
        .preview img{max-width:100%;max-height:100%;object-fit:contain}
        .ktab-btn{position:absolute;top:20px;right:20px;background:var(--primary);color:#fff;border:none;width:40px;height:40px;border-radius:50%;cursor:pointer;font-size:20px;box-shadow:var(--shadow);transition:.2s}
        .ktab-btn:hover{transform:scale(1.1)}
        .popup{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:30px;border-radius:var(--radius);box-shadow:0 4px 20px rgba(0,0,0,.3);z-index:1000;max-width:400px;max-height:80vh;overflow-y:auto}
        .popup.active{display:block;animation:fadeIn .3s}
        @keyframes fadeIn{from{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}
        .popup-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}
        .popup-overlay.active{display:block}
        .tabs{display:flex;margin-bottom:20px;border-bottom:1px solid #ddd}
        .tab-btn{padding:10px 20px;background:none;border:none;cursor:pointer;font-size:16px}
        .tab-btn.active{border-bottom:2px solid var(--primary);color:var(--primary)}
        .tab-content{display:none}
        .tab-content.active{display:block}
        .code-section{background:#f8f9fa;padding:20px;border-radius:var(--radius);font-family:monospace;white-space:pre-wrap;overflow-x:auto}
        button{background:var(--primary);color:#fff;border:none;padding:12px 24px;border-radius:var(--radius);cursor:pointer;font-size:16px;transition:.3s}
        button:hover{background:#0056b3}
        button.success{background:var(--success)}
        button.danger{background:var(--danger)}
        .error{color:var(--danger);font-size:14px;margin-top:5px}
        .success-msg{color:var(--success);margin-top:10px}
        @media(max-width:768px){.container{grid-template-columns:1fr;gap:20px}}
    </style>
</head>
<body>
<div class="container">
    <h1>ktabs Generator – Live Demo</h1>
    <div class="section">
        <h2>Build Your ktabs</h2>
        <div class="inputs">
            <div>
                <label for="imageUpload">Upload Product Image (drag & drop)</label>
                <div id="uploadArea" class="upload-area"><p>Choose image or paste URL below</p><input type="file" id="imageUpload" accept="image/*" style="display:none"></div>
                <input type="url" id="imageUrl" placeholder="Or paste image URL…" style="margin-top:10px">
                <div id="imageError" class="error"></div>
            </div>
            <div><label for="overlayText">Overlay Text (optional)</label><input type="text" id="overlayText" placeholder="e.g., 'Click the k!'"></div>
            <div><label>Popup Style</label>
                <select id="popupPosition">
                    <option value="top:20px;right:20px">Top‑Right</option>
                    <option value="bottom:20px;right:20px">Bottom‑Right</option>
                    <option value="top:50%;left:50%;transform:translate(-50%,-50%)">Center</option>
                </select>
                <input type="color" id="popupColor" value="#ffffff" title="Popup Background">
            </div>
            <div id="tabsSection" style="display:none">
                <h3>Popup Tabs</h3>
                <button id="addTab">+ Add Tab</button>
                <div id="tabsContainer"></div>
            </div>
            <button id="generateBtn">Generate ktabs Code</button>
        </div>
    </div>
    <div class="section">
        <h2>Live Preview</h2>
        <div class="preview" id="preview"><p>No image yet – upload one!</p><button class="ktab-btn" id="previewBtn" style="display:none">k</button></div>
        <div id="previewOverlay" class="popup-overlay"></div>
        <div id="previewPopup" class="popup"><h3 id="popupTitle">Info</h3><div id="popupContent"></div><button id="closePopup" class="danger" style="float:right">Close</button></div>
    </div>
</div>
<div class="section" id="codeSection" style="display:none;margin-top:40px;grid-column:span 2">
    <h2>Your Embeddable ktabs Code</h2>
    <pre id="generatedCode" class="code-section"></pre>
    <button id="copyCode" class="success">Copy to Clipboard</button>
    <div id="copyMsg" class="success-msg" style="display:none">Copied!</div>
</div>

<script>
let currentImage=null,tabs=[{title:'What is it?',content:'Explain in plain English.'}],tabCounter=1;
const uploadArea=document.getElementById('uploadArea'),imageUpload=document.getElementById('imageUpload'),imageUrl=document.getElementById('imageUrl'),preview=document.getElementById('preview'),previewBtn=document.getElementById('previewBtn'),previewPopup=document.getElementById('previewPopup'),previewOverlay=document.getElementById('previewOverlay'),popupContent=document.getElementById('popupContent'),popupTitle=document.getElementById('popupTitle');
['dragenter','dragover','dragleave','drop'].forEach(ev=>uploadArea.addEventListener(ev,e=>{e.preventDefault();e.stopPropagation();}));
['dragenter','dragover'].forEach(ev=>uploadArea.addEventListener(ev,()=>uploadArea.classList.add('dragover')));
['dragleave','drop'].forEach(ev=>uploadArea.addEventListener(ev,()=>uploadArea.classList.remove('dragover')));
uploadArea.addEventListener('drop',e=>handleImage(e.dataTransfer.files[0]));
imageUpload.addEventListener('change',e=>handleImage(e.target.files[0]));
imageUrl.addEventListener('input',e=>{if(e.target.value){currentImage=e.target.value;updatePreview();}});
function handleImage(file){if(file&&file.type.startsWith('image/')){const r=new FileReader();r.onload=e=>{currentImage=e.target.result;updatePreview();};r.readAsDataURL(file);document.getElementById('imageError').textContent='';}else{document.getElementById('imageError').textContent='Invalid image.';}}
function updatePreview(){if(!currentImage)return;const img=new Image();img.src=currentImage;preview.innerHTML='';preview.appendChild(img);previewBtn.style.display='block';document.getElementById('tabsSection').style.display='block';const o=document.getElementById('overlayText').value;if(o){const t=document.createElement('div');t.textContent=o;t.style.position='absolute';t.style.bottom='20px';t.style.left='20px';t.style.background='rgba(0,0,0,.7)';t.style.color='#fff';t.style.padding='10px';t.style.borderRadius='4px';preview.appendChild(t);}}
document.getElementById('addTab').addEventListener('click',()=>{tabCounter++;const d=document.createElement('div');d.innerHTML=`<input type="text" class="tab-title" placeholder="Tab Title" value="Tab ${tabCounter}"><textarea placeholder="Tab Content…"></textarea><button class="danger" onclick="this.parentElement.remove();updatePopupPreview()">Remove</button>`;document.getElementById('tabsContainer').appendChild(d);tabs.push({title:`Tab ${tabCounter}`,content:''});updatePopupPreview();});
function collectTabs(){tabs=[];document.querySelectorAll('#tabsContainer > div').forEach(d=>{const t=d.querySelector('.tab-title').value.trim(),c=d.querySelector('textarea').value.trim();if(t&&c)tabs.push({title:t,content:c});});if(tabs.length===0)tabs.push({title:'Info',content:'Add details here.'});}
function updatePopupPreview(){collectTabs();popupTitle.textContent=tabs[0].title;popupContent.innerHTML=`<div class="tabs">${tabs.map((t,i)=>`<button class="tab-btn ${i===0?'active':''}" data-tab="${i}">${t.title}</button>`).join('')}</div><div class="tab-contents">${tabs.map((t,i)=>`<div class="tab-content ${i===0?'active':''}" data-tab="${i}">${t.content.replace(/\n/g,'<br>')}</div>`).join('')}</div>`;}
document.getElementById('overlayText').addEventListener('input',updatePreview);
document.querySelectorAll('input,textarea,select').forEach(el=>el.addEventListener('input',updatePopupPreview));
previewBtn.onclick=()=>{updatePopupPreview();previewPopup.classList.add('active');previewOverlay.classList.add('active');};
document.getElementById('closePopup').onclick=closePopup;previewOverlay.onclick=closePopup;
function closePopup(){previewPopup.classList.remove('active');previewOverlay.classList.remove('active');}
popupContent.onclick=e=>{if(e.target.classList.contains('tab-btn')){const i=+e.target.dataset.tab;popupContent.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));popupContent.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));e.target.classList.add('active');popupContent.querySelector(`.tab-content[data-tab="${i}"]`).classList.add('active');popupTitle.textContent=tabs[i].title;}};
document.getElementById('generateBtn').onclick=()=>{
    if(!currentImage){alert('Upload an image first!');return;}
    collectTabs();
    const pos=document.getElementById('popupPosition').value,bg=document.getElementById('popupColor').value,overlay=document.getElementById('overlayText').value;
    const code=`<!-- ktabs Embed --><div id="ktabs-container" style="position:relative;display:inline-block;"><img id="ktabs-img" src="${currentImage}" alt="Product" style="max-width:100%">${overlay?`<div style="position:absolute;bottom:20px;left:20px;background:rgba(0,0,0,.7);color:#fff;padding:10px;border-radius:4px;z-index:10;">${overlay}</div>`:''}<button id="ktabs-btn" style="position:absolute;${pos};background:#007bff;color:#fff;border:none;width:40px;height:40px;border-radius:50%;cursor:pointer;font-size:20px;box-shadow:0 2px 10px rgba(0,0,0,.1);z-index:10" aria-label="Info">k</button></div><div id="ktabs-popup" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:${bg};padding:30px;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.3);max-width:400px;max-height:80vh;overflow-y:auto;z-index:1000"><h3 id="ktabs-title">${tabs[0].title}</h3><div id="ktabs-content"><div class="ktabs-tabs">${tabs.map((t,i)=>`<button class="ktabs-tab-btn ${i===0?'active':''}" data-tab="${i}">${t.title}</button>`).join('')}</div><div class="ktabs-tab-contents">${tabs.map((t,i)=>`<div class="ktabs-tab-content ${i===0?'active':''}" data-tab="${i}">${t.content.replace(/\n/g,'<br>')}</div>`).join('')}</div></div><button id="ktabs-close" style="float:right;background:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer">Close</button></div><div id="ktabs-overlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999"></div><style>.ktabs-popup{animation:fadeIn .3s}@keyframes fadeIn{from{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.ktabs-tabs{display:flex;margin-bottom:20px;border-bottom:1px solid #ddd}.ktabs-tab-btn{padding:10px 20px;background:none;border:none;cursor:pointer}.ktabs-tab-btn.active{border-bottom:2px solid #007bff;color:#007bff}.ktabs-tab-content{display:none}.ktabs-tab-content.active{display:block}#ktabs-btn:hover{transform:scale(1.1)}</style><script>document.addEventListener('DOMContentLoaded',()=>{const data=${JSON.stringify(tabs)};const btn=document.getElementById('ktabs-btn'),pop=document.getElementById('ktabs-popup'),ov=document.getElementById('ktabs-overlay'),close=document.getElementById('ktabs-close'),title=document.getElementById('ktabs-title'),cont=document.getElementById('ktabs-content');btn.onclick=()=>{pop.style.display='block';ov.style.display='block';show(0);};close.onclick=ov.onclick=()=>{pop.style.display='none';ov.style.display='none';};function show(i){cont.querySelectorAll('.ktabs-tab-btn').forEach(b=>b.classList.remove('active'));cont.querySelectorAll('.ktabs-tab-content').forEach(c=>c.classList.remove('active'));cont.querySelector('[data-tab="'+i+'"]').classList.add('active');title.textContent=data[i].title;cont.querySelector('.ktabs-tab-content[data-tab="'+i+'"]').classList.add('active');}cont.addEventListener('click',e=>{if(e.target.classList.contains('ktabs-tab-btn'))show(+e.target.dataset.tab);});});</script><!-- End ktabs Embed -->`;
    document.getElementById('generatedCode').textContent=code;
    document.getElementById('codeSection').style.display='block';
    document.getElementById('codeSection').scrollIntoView({behavior:'smooth'});
};
document.getElementById('copyCode').onclick=()=>{navigator.clipboard.writeText(document.getElementById('generatedCode').textContent).then(()=>{const m=document.getElementById('copyMsg');m.style.display='block';setTimeout(()=>m.style.display='none',2000);});};
</script>
</body>
</html>
