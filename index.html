<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ktabs Generator</title>
  <style>
    :root{
      --bg:#0d0d0d;--card:#1a1a1a;--text:#e0e0e0;--dim:#999;
      --primary:#0d6efd;--accent:#0dcaf0;--ok:#28a745;--no:#dc3545;
      --border:#333;--radius:16px;--shadow:0 6px 20px rgba(0,0,0,.4);
      --input-bg:#2a2a2a;--input-border:#444;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:system-ui,-apple-system,sans-serif;
      background:var(--bg);color:var(--text);line-height:1.6;
      padding:16px 12px;min-height:100vh
    }
    .cat{
      width:100%;max-width:180px;margin:0 auto 20px;display:block;
      border-radius:50%;box-shadow:0 4px 16px rgba(0,0,0,.5);
      border:3px solid var(--accent);animation:pulse 2s infinite
    }
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    h1{font-size:1.8rem;text-align:center;color:var(--accent);margin-bottom:8px}
    h1 span{font-size:1.1rem;color:var(--dim);display:block;margin-top:4px}
    .c{display:flex;flex-direction:column;gap:20px}
    .s{
      background:var(--card);padding:20px;border-radius:var(--radius);
      box-shadow:var(--shadow);border:1px solid var(--border)
    }
    .i{display:flex;flex-direction:column;gap:16px}
    label{font-weight:600;color:var(--dim);font-size:0.95rem}
    input,textarea,select{
      background:var(--input-bg);color:var(--text);border:1px solid var(--input-border);
      padding:14px;border-radius:12px;font-size:16px;outline:none;transition:.2s;width:100%
    }
    input:focus,textarea:focus,select:focus{
      border-color:var(--primary);box-shadow:0 0 0 3px rgba(13,110,253,.2)
    }
    textarea{resize:none;min-height:90px;font-size:15px}
    .up{
      border:2px dashed var(--input-border);padding:32px;text-align:center;
      border-radius:12px;transition:.3s;background:var(--input-bg);font-size:15px
    }
    .up:hover,.up.d{border-color:var(--primary);background:rgba(13,110,253,.15)}
    .prev{
      position:relative;height:240px;background:var(--input-bg);border-radius:var(--radius);
      overflow:hidden;display:flex;align-items:center;justify-content:center;
      border:1px solid var(--border);margin-top:8px
    }
    .prev img{max-width:100%;max-height:100%;object-fit:contain;border-radius:12px}
    .kb{
      position:absolute;top:12px;right:12px;background:var(--primary);color:#fff;
      border:none;width:48px;height:48px;border-radius:50%;cursor:pointer;
      font-size:24px;box-shadow:var(--shadow);transition:.2s;font-weight:bold
    }
    .kb:hover{transform:scale(1.2);background:#0b5ed7}
    .pop{
      display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
      background:var(--card);padding:24px;border-radius:var(--radius);
      box-shadow:0 10px 40px rgba(0,0,0,.6);z-index:1000;
      max-width:90%;width:380px;max-height:85vh;overflow-y:auto;
      border:1px solid var(--border);font-size:15px
    }
    .pop.a{display:block;animation:f .3s}
    @keyframes f{from{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}
    .o{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:999}
    .o.a{display:block}
    .tb{
      display:flex;margin-bottom:16px;border-bottom:1px solid var(--border);
      overflow-x:auto;scrollbar-width:none;-webkit-overflow-scrolling:touch
    }
    .tb::-webkit-scrollbar{display:none}
    .tbb{
      padding:10px 16px;background:none;border:none;color:var(--dim);
      cursor:pointer;font-size:15px;white-space:nowrap;flex-shrink:0
    }
    .tbb.a{color:var(--accent);border-bottom:2px solid var(--accent);font-weight:600}
    .tc{display:none;padding-top:8px;color:var(--text);font-size:14.5px}
    .tc.a{display:block}
    .code{
      background:#0a0a0a;color:#8ff;padding:16px;border-radius:12px;
      font-family:monospace;white-space:pre-wrap;overflow-x:auto;
      border:1px solid var(--border);font-size:13px;line-height:1.5
    }
    button{
      background:var(--primary);color:#fff;border:none;padding:14px;
      border-radius:12px;cursor:pointer;font-size:16px;transition:.3s;
      font-weight:600;width:100%;margin-top:8px
    }
    button:hover{background:#0b5ed7}
    button.ok{background:var(--ok)}
    button.ok:hover{background:#218838}
    button.no{background:var(--no)}
    button.no:hover{background:#c82333}
    .e{color:var(--no);font-size:0.9rem;margin-top:4px}
    .m{color:var(--ok);margin-top:12px;font-weight:600;text-align:center}
    @media(min-width:600px){
      .c{flex-direction:row;gap:24px}
      .s{flex:1}
      h1{font-size:2.1rem}
      .prev{height:300px}
    }
  </style>
</head>
<body>
  <img src="https://cataas.com/cat?width=180&height=180" alt="Cute Cat" class="cat">
  <h1>ktabs Generator <span>Dark & Mobile-First</span></h1>

  <div class="c">
    <div class="s">
      <h2 style="font-size:1.3rem;color:var(--accent);margin-bottom:12px">Build</h2>
      <div class="i">
        <div>
          <label>Image (tap to upload)</label>
          <div id="up" class="up"><p>Choose file or paste URL</p><input type="file" id="iu" accept="image/*" style="display:none"></div>
          <input type="url" id="iurl" placeholder="Or paste image URL…" style="margin-top:8px">
          <div id="err" class="e"></div>
        </div>
        <div><label>Overlay Text</label><input type="text" id="ot" placeholder="e.g., 'Tap the k!'"></div>
        <div>
          <label>Position</label>
          <select id="pos">
            <option value="top:16px;right:16px">Top-Right</option>
            <option value="bottom:16px;right:16px">Bottom-Right</option>
            <option value="top:50%;left:50%;transform:translate(-50%,-50%)">Center</option>
          </select>
        </div>
        <div>
          <label>Popup BG</label>
          <input type="color" id="bg" value="#1a1a1a">
        </div>
        <div id="ts" style="display:none">
          <h3 style="color:var(--accent);font-size:1.1rem;margin:16px 0 8px">Tabs</h3>
          <button id="at" style="background:var(--accent);font-size:15px">+ Add Tab</button>
          <div id="tc"></div>
        </div>
        <button id="gen">Generate Code</button>
      </div>
    </div>

    <div class="s">
      <h2 style="font-size:1.3rem;color:var(--accent);margin-bottom:12px">Preview</h2>
      <div class="prev" id="pr"><p style="color:#777;font-size:15px">No image yet</p><button class="kb" id="pb" style="display:none">k</button></div>
      <div id="po" class="o"></div>
      <div id="pp" class="pop"><h3 id="pt" style="color:var(--accent);margin-bottom:12px">Info</h3><div id="pc"></div><button id="cp" class="no" style="margin-top:16px">Close</button></div>
    </div>
  </div>

  <div class="s" id="cs" style="display:none;margin-top:24px">
    <h2 style="color:var(--accent);font-size:1.3rem;margin-bottom:12px">Embed Code</h2>
    <pre id="gc" class="code"></pre>
    <button id="cc" class="ok">Copy to Clipboard</button>
    <div id="cm" class="m" style="display:none">Copied!</div>
  </div>

<script>
let img=null,tabs=[{title:'What is it?',content:'Explain in plain English.'}],cnt=1;
const up=document.getElementById('up'),iu=document.getElementById('iu'),iurl=document.getElementById('iurl'),
      pr=document.getElementById('pr'),pb=document.getElementById('pb'),pp=document.getElementById('pp'),
      po=document.getElementById('po'),pc=document.getElementById('pc'),pt=document.getElementById('pt');

['dragenter','dragover','dragleave','drop'].forEach(e=>up.addEventListener(e,ev=>{ev.preventDefault();ev.stopPropagation();}));
['dragenter','dragover'].forEach(e=>up.addEventListener(e,()=>up.classList.add('d')));
['dragleave','drop'].forEach(e=>up.addEventListener(e,()=>up.classList.remove('d')));
up.addEventListener('drop',e=>h(e.dataTransfer.files[0]));
iu.addEventListener('change',e=>h(e.target.files[0]));
iurl.addEventListener('input',e=>{if(e.target.value){img=e.target.value;upr();}});

function h(f){
  if(f&&f.type.startsWith('image/')){
    const r=new FileReader();r.onload=e=>{img=e.target.result;upr();};r.readAsDataURL(f);
    document.getElementById('err').textContent='';
  }else document.getElementById('err').textContent='Invalid image.';
}

function upr(){
  if(!img)return;
  const i=new Image();i.src=img;pr.innerHTML='';pr.appendChild(i);pb.style.display='block';
  document.getElementById('ts').style.display='block';
  const o=document.getElementById('ot').value;
  if(o){
    const t=document.createElement('div');t.textContent=o;
    t.style.position='absolute';t.style.bottom='12px';t.style.left='12px';
    t.style.background='rgba(0,0,0,.7)';t.style.color='#fff';t.style.padding='6px 10px';
    t.style.borderRadius='6px';t.style.fontSize='13px';t.style.fontWeight='500';
    pr.appendChild(t);
  }
}

document.getElementById('at').addEventListener('click',()=>{
  cnt++;
  const d=document.createElement('div');d.style.marginTop='12px';
  d.innerHTML=`
    <input class="tt" placeholder="Title" value="Tab ${cnt}" style="margin-bottom:6px">
    <textarea placeholder="Content…"></textarea>
    <button class="no" onclick="this.parentElement.remove();upv()" style="margin-top:6px;font-size:14px">Remove</button>
  `;
  document.getElementById('tc').appendChild(d);
  tabs.push({title:`Tab ${cnt}`,content:''});
  upv();
});

function ct(){
  tabs=[];
  document.querySelectorAll('#tc > div').forEach(d=>{
    const t=d.querySelector('.tt').value.trim(),c=d.querySelector('textarea').value.trim();
    if(t&&c)tabs.push({title:t,content:c});
  });
  if(!tabs.length)tabs.push({title:'Info',content:'Add details.'});
}

function upv(){
  ct();pt.textContent=tabs[0].title;
  pc.innerHTML=`
    <div class="tb">${tabs.map((t,i)=>`<button class="tbb ${i===0?'a':''}" data-t="${i}">${t.title}</button>`).join('')}</div>
    <div class="tbc">${tabs.map((t,i)=>`<div class="tc ${i===0?'a':''}" data-t="${i}">${t.content.replace(/\n/g,'<br>')}</div>`).join('')}</div>
  `;
}

document.getElementById('ot').addEventListener('input',upr);
document.querySelectorAll('input,textarea,select').forEach(el=>el.addEventListener('input',upv));

pb.onclick=()=>{upv();pp.classList.add('a');po.classList.add('a');};
document.getElementById('cp').onclick=cl;po.onclick=cl;
function cl(){pp.classList.remove('a');po.classList.remove('a');}

pc.onclick=e=>{
  if(e.target.classList.contains('tbb')){
    const i=+e.target.dataset.t;
    pc.querySelectorAll('.tbb').forEach(b=>b.classList.remove('a'));
    pc.querySelectorAll('.tc').forEach(c=>c.classList.remove('a'));
    e.target.classList.add('a');
    pc.querySelector(`.tc[data-t="${i}"]`).classList.add('a');
    pt.textContent=tabs[i].title;
  }
};

document.getElementById('gen').onclick=()=>{
  if(!img){alert('Upload an image!');return;}
  ct();
  const p=document.getElementById('pos').value,b=document.getElementById('bg').value,o=document.getElementById('ot').value;
  const code=`<!-- ktabs Mobile Dark -->
<div id="k-c" style="position:relative;display:inline-block;">
  <img src="${img}" alt="Product" style="max-width:100%;border-radius:12px">
  ${o?`<div style="position:absolute;bottom:12px;left:12px;background:rgba(0,0,0,.7);color:#fff;padding:6px 10px;border-radius:6px;font-size:13px">${o}</div>`:''}
  <button id="k-b" style="position:absolute;${p};background:#0d6efd;color:#fff;border:none;width:48px;height:48px;border-radius:50%;font-size:24px;cursor:pointer;box-shadow:0 6px 20px rgba(0,0,0,.4);font-weight:bold" aria-label="Info">k</button>
</div>
<div id="k-p" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:${b};padding:24px;border-radius:16px;max-width:90%;max-height:85vh;overflow-y:auto;z-index:1000;border:1px solid #333">
  <h3 id="k-t" style="color:#0dcaf0;margin-bottom:16px">${tabs[0].title}</h3>
  <div id="k-co">
    <div class="k-tb">${tabs.map((t,i)=>`<button class="k-tbb ${i===0?'a':''}" data-t="${i}">${t.title}</button>`).join('')}</div>
    <div class="k-tc">${tabs.map((t,i)=>`<div class="k-tcc ${i===0?'a':''}" data-t="${i}">${t.content.replace(/\n/g,'<br>')}</div>`).join('')}</div>
  </div>
  <button id="k-cl" style="float:right;background:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:8px;cursor:pointer;margin-top:16px">Close</button>
</div>
<div id="k-o" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:999"></div>
<style>
.k-p{animation:f .3s}@keyframes f{from{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}
.k-tb{display:flex;margin-bottom:16px;border-bottom:1px solid #333;overflow-x:auto}
.k-tbb{padding:10px 16px;background:none;border:none;color:#999;cursor:pointer;font-size:15px}
.k-tbb.a{color:#0dcaf0;border-bottom:2px solid #0dcaf0;font-weight:600}
.k-tcc{display:none;padding-top:8px;color:#e0e0e0;font-size:14.5px}
.k-tcc.a{display:block}
#k-b:hover{transform:scale(1.2);background:#0b5ed7}
</style>
<script>
document.addEventListener('DOMContentLoaded',()=>{const d=${JSON.stringify(tabs)};
const b=document.getElementById('k-b'),p=document.getElementById('k-p'),o=document.getElementById('k-o'),c=document.getElementById('k-cl'),t=document.getElementById('k-t'),co=document.getElementById('k-co');
b.onclick=()=>{p.style.display='block';o.style.display='block';s(0);};
c.onclick=o.onclick=()=>{p.style.display='none';o.style.display='none';};
function s(i){co.querySelectorAll('.k-tbb').forEach(bb=>bb.classList.remove('a'));co.querySelectorAll('.k-tcc').forEach(cc=>cc.classList.remove('a'));co.querySelector('[data-t="'+i+'"]').classList.add('a');t.textContent=d[i].title;co.querySelector('.k-tcc[data-t="'+i+'"]').classList.add('a');}
co.addEventListener('click',e=>{if(e.target.classList.contains('k-tbb'))s(+e.target.dataset.t);});});
</script>
<!-- End ktabs -->`;
  document.getElementById('gc').textContent=code;
  document.getElementById('cs').style.display='block';
  document.getElementById('cs').scrollIntoView({behavior:'smooth'});
};

document.getElementById('cc').onclick=()=>{
  navigator.clipboard.writeText(document.getElementById('gc').textContent).then(()=>{
    const m=document.getElementById('cm');m.style.display='block';setTimeout(()=>m.style.display='none',2000);
  });
};
</script>
</body>
</html>
